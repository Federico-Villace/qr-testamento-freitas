<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Testamento Freitas</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
    <style>
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        margin: 2rem;
      }
      .wrap {
        max-width: 780px;
        margin-inline: auto;
      }
      .row {
        display: flex;
        gap: 2rem;
        align-items: flex-start;
        flex-wrap: wrap;
      }
      #qrcode {
        width: 220px;
        height: 220px;
      }
      button {
        padding: 0.8rem 1.1rem;
        border: 0;
        border-radius: 0.6rem;
        cursor: pointer;
      }
      .primary {
        background: #111827;
        color: #fff;
      }
      .muted {
        color: #6b7280;
        font-size: 0.9rem;
      }
      pre {
        white-space: pre-wrap;
      }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js" defer></script>
  </head>

  <body>
    <div class="wrap">
      <h1>Descarga tu testamento</h1>
      <p class="muted">
        Escane√° el QR y acced√© al Testamento de Mateo Freitas üìú
      </p>

      <div class="row">
        <div>
          <button class="primary" id="mostrarQrBtn">Generar QR</button>
        </div>

        <div>
          <div id="qrcode" title="Escane√° para abrir el testamento"></div>
          <p class="muted">
            Escane√° el c√≥digo para ver el testamento completo.
          </p>
        </div>
      </div>
    </div>

    <script defer>
      function buildAutoUrl() {
        // Tu IP local y el archivo testamento.html
        return "http://10.56.10.9:5501/mano.jpg";
      }

      function renderQR() {
        const target = document.getElementById("qrcode");
        target.innerHTML = "";
        new QRCode(target, {
          text: buildAutoUrl(),
          width: 220,
          height: 220,
          correctLevel: QRCode.CorrectLevel.M,
        });
      }

      window.addEventListener("DOMContentLoaded", () => {
        renderQR();
        document.getElementById("mostrarQrBtn").addEventListener("click", renderQR);
      });
    </script>
  </body>
</html>
